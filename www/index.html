<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>XYStore - Mobile</title>
    <!-- Tailwind via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <!-- GSAP untuk animasi lebih smooth -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
        }

        #app {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            background: #f8fafc;
        }

        /* Permission Modal */
        .permission-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(20px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 24px;
        }

        .permission-card {
            background: linear-gradient(145deg, #1e293b, #0f172a);
            border-radius: 48px;
            padding: 32px 24px;
            max-width: 340px;
            width: 100%;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }

        /* Tour Overlay */
        .tour-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(20px);
            z-index: 9999;
            display: none;
            flex-direction: column;
            padding: 24px;
        }

        .tour-slide {
            flex: 1;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            padding: 20px;
            animation: fadeScale 0.5s ease;
        }

        .tour-slide.active {
            display: flex;
        }

        .tour-progress {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 30px 0 20px;
        }

        .progress-dot {
            width: 8px;
            height: 8px;
            border-radius: 20px;
            background: rgba(255,255,255,0.3);
            transition: all 0.3s;
        }

        .progress-dot.active {
            width: 24px;
            background: #3b82f6;
            box-shadow: 0 0 15px #3b82f6;
        }

        @keyframes fadeScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Bottom Nav */
        .bottom-nav {
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(0,0,0,0.05);
            padding: 8px 16px 20px;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.02);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: #94a3b8;
            transition: all 0.2s;
            cursor: pointer;
            position: relative;
            padding: 8px 12px;
            border-radius: 30px;
        }

        .nav-item.active {
            color: #3b82f6;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: #3b82f6;
            border-radius: 4px;
            box-shadow: 0 0 10px #3b82f6;
        }

        .nav-item i {
            font-size: 22px;
        }

        .nav-item span {
            font-size: 11px;
            font-weight: 500;
        }

        /* Content Panels */
        .panel {
            display: none;
            height: 100%;
            overflow-y: auto;
            padding: 20px 16px;
            scroll-behavior: smooth;
        }

        .panel.active {
            display: block;
        }

        /* Skeleton */
        .skeleton-card {
            background: white;
            border-radius: 24px;
            padding: 16px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.02);
        }

        .skeleton-line {
            height: 20px;
            background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 12px;
        }

        .skeleton-image {
            width: 100%;
            height: 160px;
            background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 20px;
            margin-bottom: 16px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 16px;
            left: 16px;
            right: 16px;
            background: #1e293b;
            color: white;
            padding: 16px 20px;
            border-radius: 30px;
            z-index: 999;
            transform: translateY(-150%);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .notification.show {
            transform: translateY(0);
        }

        /* Product Card */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .product-item {
            background: white;
            border-radius: 24px;
            padding: 12px;
            transition: all 0.2s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.02);
        }

        .product-item:active {
            transform: scale(0.97);
        }

        /* Floating Action */
        .fab {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 56px;
            height: 56px;
            background: linear-gradient(145deg, #3b82f6, #2563eb);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 10px 30px rgba(37, 99, 235, 0.4);
            cursor: pointer;
            z-index: 50;
            transition: all 0.2s;
        }

        .fab:active {
            transform: scale(0.9);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Permission Modal -->
        <div id="permissionModal" class="permission-modal">
            <div class="permission-card">
                <div class="text-center mb-8">
                    <div class="w-20 h-20 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-bell text-4xl text-blue-400"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-2">Izinkan Notifikasi</h2>
                    <p class="text-gray-400 text-sm">Dapatkan info promo dan update terbaru dari XYStore</p>
                </div>

                <div class="space-y-3">
                    <button onclick="requestPermission()" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-semibold flex items-center justify-center gap-2">
                        <i class="fas fa-check-circle"></i>
                        Izinkan
                    </button>
                    <button onclick="skipPermission()" class="w-full bg-white/10 text-white py-4 rounded-2xl font-semibold">
                        Nanti Dulu
                    </button>
                </div>
            </div>
        </div>

        <!-- Tour Overlay (4 Slides) -->
        <div id="tourOverlay" class="tour-overlay">
            <!-- Slide 1 -->
            <div class="tour-slide active" id="tour1">
                <div class="w-32 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-[40px] flex items-center justify-center mb-8 rotate-12">
                    <i class="fas fa-store text-6xl text-white"></i>
                </div>
                <h2 class="text-3xl font-bold mb-3">Selamat Datang di XYStore</h2>
                <p class="text-gray-400 max-w-[280px]">Tempat belanja fashion sport terpercaya dengan harga terbaik</p>
            </div>

            <!-- Slide 2 -->
            <div class="tour-slide" id="tour2">
                <div class="w-32 h-32 bg-gradient-to-br from-green-500 to-teal-600 rounded-[40px] flex items-center justify-center mb-8">
                    <i class="fas fa-tag text-6xl text-white"></i>
                </div>
                <h2 class="text-3xl font-bold mb-3">Diskon Spesial</h2>
                <p class="text-gray-400 max-w-[280px]">Dapatkan diskon hingga 70% untuk member baru</p>
            </div>

            <!-- Slide 3 -->
            <div class="tour-slide" id="tour3">
                <div class="w-32 h-32 bg-gradient-to-br from-orange-500 to-red-600 rounded-[40px] flex items-center justify-center mb-8 -rotate-12">
                    <i class="fas fa-truck-fast text-6xl text-white"></i>
                </div>
                <h2 class="text-3xl font-bold mb-3">Gratis Ongkir</h2>
                <p class="text-gray-400 max-w-[280px]">Nikmati gratis ongkir tanpa minimal belanja</p>
            </div>

            <!-- Slide 4 -->
            <div class="tour-slide" id="tour4">
                <div class="w-32 h-32 bg-gradient-to-br from-pink-500 to-rose-600 rounded-[40px] flex items-center justify-center mb-8 rotate-45">
                    <i class="fas fa-gem text-6xl text-white"></i>
                </div>
                <h2 class="text-3xl font-bold mb-3">XY Member</h2>
                <p class="text-gray-400 max-w-[280px]">Dapatkan poin setiap transaksi dan tukarkan dengan hadiah</p>
            </div>

            <!-- Progress Dots -->
            <div class="tour-progress">
                <span class="progress-dot active" data-tour="1"></span>
                <span class="progress-dot" data-tour="2"></span>
                <span class="progress-dot" data-tour="3"></span>
                <span class="progress-dot" data-tour="4"></span>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex gap-3 px-6 pb-10">
                <button onclick="prevTour()" id="tourPrev" class="flex-1 bg-white/10 text-white py-4 rounded-2xl font-semibold backdrop-blur">
                    Sebelumnya
                </button>
                <button onclick="nextTour()" id="tourNext" class="flex-1 bg-blue-600 text-white py-4 rounded-2xl font-semibold shadow-lg">
                    Selanjutnya
                </button>
            </div>
        </div>

        <!-- Notification Component -->
        <div id="notification" class="notification">
            <div class="w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center">
                <i class="fas fa-bell text-blue-400"></i>
            </div>
            <div class="flex-1">
                <p id="notifMessage" class="font-medium">Notifikasi baru</p>
                <p id="notifSub" class="text-xs text-gray-400">XYStore</p>
            </div>
            <button onclick="hideNotif()" class="text-gray-400">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-hidden relative">
            <!-- Home Panel -->
            <div id="panelHome" class="panel active">
                <div id="homeSkeleton">
                    <div class="skeleton-image"></div>
                    <div class="skeleton-card">
                        <div class="skeleton-line w-3/4 mb-3"></div>
                        <div class="skeleton-line w-1/2 mb-2"></div>
                        <div class="skeleton-line w-full"></div>
                    </div>
                    <div class="skeleton-card">
                        <div class="skeleton-line w-3/4 mb-3"></div>
                        <div class="skeleton-line w-1/2 mb-2"></div>
                        <div class="skeleton-line w-full"></div>
                    </div>
                    <div class="skeleton-card">
                        <div class="skeleton-line w-3/4 mb-3"></div>
                        <div class="skeleton-line w-1/2 mb-2"></div>
                        <div class="skeleton-line w-full"></div>
                    </div>
                </div>

                <div id="homeContent" style="display: none;">
                    <!-- Header -->
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Halo, Haekal! ðŸ‘‹</h1>
                            <p class="text-sm text-gray-500">Selamat datang kembali</p>
                        </div>
                        <div class="relative" onclick="showNotif('Ada 3 notifikasi baru', 'info')">
                            <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center">
                                <i class="fas fa-bell text-xl text-gray-600"></i>
                            </div>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center border-2 border-white">3</span>
                        </div>
                    </div>

                    <!-- Promo Banner -->
                    <div class="bg-gradient-to-r from-blue-600 to-blue-400 rounded-[32px] p-5 mb-6 text-white">
                        <p class="text-sm opacity-90">Flash Sale</p>
                        <p class="text-3xl font-bold mb-2">Diskon 50%</p>
                        <p class="text-sm opacity-75">Khusus produk terpilih</p>
                        <div class="flex gap-2 mt-4">
                            <div class="bg-white/20 rounded-xl px-3 py-2 text-sm">Berakhir 12:30</div>
                        </div>
                    </div>

                    <!-- Categories -->
                    <h2 class="font-semibold text-gray-800 mb-3">Kategori</h2>
                    <div class="grid grid-cols-4 gap-3 mb-6">
                        <div class="text-center">
                            <div class="bg-gray-100 w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-2">
                                <i class="fas fa-tshirt text-2xl text-blue-500"></i>
                            </div>
                            <span class="text-xs">Baju</span>
                        </div>
                        <div class="text-center">
                            <div class="bg-gray-100 w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-2">
                                <i class="fas fa-shoe-prints text-2xl text-green-500"></i>
                            </div>
                            <span class="text-xs">Sepatu</span>
                        </div>
                        <div class="text-center">
                            <div class="bg-gray-100 w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-2">
                                <i class="fas fa-hat-cowboy text-2xl text-purple-500"></i>
                            </div>
                            <span class="text-xs">Topi</span>
                        </div>
                        <div class="text-center">
                            <div class="bg-gray-100 w-14 h-14 rounded-2xl flex items-center justify-center mx-auto mb-2">
                                <i class="fas fa-bag-shopping text-2xl text-orange-500"></i>
                            </div>
                            <span class="text-xs">Tas</span>
                        </div>
                    </div>

                    <!-- Products -->
                    <h2 class="font-semibold text-gray-800 mb-3">Rekomendasi</h2>
                    <div class="product-grid">
                        <div class="product-item">
                            <div class="bg-gray-100 h-32 rounded-2xl mb-3"></div>
                            <h3 class="font-semibold">XY Jersey</h3>
                            <p class="text-sm text-gray-500">Rp 289.000</p>
                            <div class="flex items-center gap-1 mt-2">
                                <i class="fas fa-star text-xs text-yellow-400"></i>
                                <span class="text-xs">4.9</span>
                            </div>
                        </div>
                        <div class="product-item">
                            <div class="bg-gray-100 h-32 rounded-2xl mb-3"></div>
                            <h3 class="font-semibold">XY Shorts</h3>
                            <p class="text-sm text-gray-500">Rp 159.000</p>
                            <div class="flex items-center gap-1 mt-2">
                                <i class="fas fa-star text-xs text-yellow-400"></i>
                                <span class="text-xs">4.8</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search Panel -->
            <div id="panelSearch" class="panel">
                <div class="sticky top-0 bg-[#f8fafc] pt-2 pb-4">
                    <div class="bg-white rounded-3xl px-5 py-4 flex items-center shadow-sm border border-gray-100">
                        <i class="fas fa-search text-gray-400 mr-3"></i>
                        <input type="text" placeholder="Cari produk XY..." class="flex-1 outline-none text-base">
                    </div>
                </div>
                
                <div class="mt-6">
                    <p class="text-gray-400 text-sm mb-3">Pencarian Populer</p>
                    <div class="flex flex-wrap gap-2">
                        <span class="bg-gray-100 px-4 py-2 rounded-full text-sm">Jersey</span>
                        <span class="bg-gray-100 px-4 py-2 rounded-full text-sm">Hoodie</span>
                        <span class="bg-gray-100 px-4 py-2 rounded-full text-sm">Sepatu</span>
                        <span class="bg-gray-100 px-4 py-2 rounded-full text-sm">Tas</span>
                    </div>
                </div>
            </div>

            <!-- Cart Panel -->
            <div id="panelCart" class="panel">
                <h2 class="text-2xl font-bold mb-6">Keranjang</h2>
                <div class="bg-white rounded-3xl p-8 text-center">
                    <div class="w-24 h-24 bg-gray-100 rounded-3xl flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-shopping-cart text-4xl text-gray-400"></i>
                    </div>
                    <p class="text-gray-500 mb-4">Keranjang belanja kosong</p>
                    <button onclick="switchPanel('home')" class="bg-blue-600 text-white px-8 py-3 rounded-2xl font-semibold">
                        Belanja Yuk
                    </button>
                </div>
            </div>

            <!-- Profile Panel -->
            <div id="panelProfile" class="panel">
                <div class="bg-gradient-to-br from-blue-600 to-purple-600 text-white p-8 rounded-[32px] mb-6">
                    <div class="flex items-center gap-4">
                        <div class="w-20 h-20 bg-white/20 rounded-3xl flex items-center justify-center">
                            <i class="fas fa-user text-4xl"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold">Haekal</p>
                            <p class="text-sm opacity-90">@haekal_xy</p>
                        </div>
                    </div>
                </div>

                <div class="space-y-3">
                    <div class="bg-white p-5 rounded-2xl flex items-center gap-4">
                        <i class="fas fa-history text-xl text-blue-500 w-8"></i>
                        <span class="font-medium">Riwayat</span>
                        <i class="fas fa-chevron-right ml-auto text-gray-400"></i>
                    </div>
                    <div class="bg-white p-5 rounded-2xl flex items-center gap-4">
                        <i class="fas fa-heart text-xl text-red-500 w-8"></i>
                        <span class="font-medium">Favorit</span>
                        <i class="fas fa-chevron-right ml-auto text-gray-400"></i>
                    </div>
                    <div class="bg-white p-5 rounded-2xl flex items-center gap-4">
                        <i class="fas fa-cog text-xl text-gray-500 w-8"></i>
                        <span class="font-medium">Pengaturan</span>
                        <i class="fas fa-chevron-right ml-auto text-gray-400"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" data-panel="home" onclick="switchPanel('home')">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="nav-item" data-panel="search" onclick="switchPanel('search')">
                <i class="fas fa-search"></i>
                <span>Cari</span>
            </div>
            <div class="nav-item" data-panel="cart" onclick="switchPanel('cart')">
                <i class="fas fa-shopping-cart"></i>
                <span>Cart</span>
                <span class="absolute -top-1 right-0 bg-blue-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center border-2 border-white">0</span>
            </div>
            <div class="nav-item" data-panel="profile" onclick="switchPanel('profile')">
                <i class="fas fa-user"></i>
                <span>Akun</span>
            </div>
        </div>

        <!-- FAB -->
        <div class="fab" onclick="addToCart()">
            <i class="fas fa-plus"></i>
        </div>

        <!-- Copyright -->
        <div style="position: fixed; bottom: 85px; left: 0; right: 0; text-align: center; font-size: 10px; color: #94a3b8; pointer-events: none; z-index: 5;">
            PoweredBy Kall & XyTeam
        </div>
    </div>

    <script>
        // ==================== STATE ====================
        let currentPanel = 'home';
        let currentTour = 1;
        const totalTour = 4;

        // ==================== NOTIFICATION PERMISSION ====================
        function requestPermission() {
            if ('Notification' in window) {
                Notification.requestPermission().then(perm => {
                    if (perm === 'granted') {
                        showNotif('Notifikasi diaktifkan!', 'success');
                        document.getElementById('permissionModal').style.display = 'none';
                        startTour();
                        
                        // Test notification
                        new Notification('XYStore', {
                            body: 'Terima kasih sudah mengaktifkan notifikasi!',
                            icon: 'https://via.placeholder.com/192'
                        });
                    }
                });
            }
            
            // Play sound
            playNotificationSound();
        }

        function skipPermission() {
            document.getElementById('permissionModal').style.display = 'none';
            startTour();
        }

        function playNotificationSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        // ==================== TOUR SYSTEM ====================
        function startTour() {
            const tourCompleted = localStorage.getItem('xy_tour_completed');
            if (!tourCompleted) {
                document.getElementById('tourOverlay').style.display = 'flex';
                gsap.from('.tour-slide.active', {
                    scale: 0.8,
                    opacity: 0,
                    duration: 0.6,
                    ease: 'back.out'
                });
            }
        }

        function nextTour() {
            if (currentTour < totalTour) {
                document.getElementById(`tour${currentTour}`).classList.remove('active');
                document.querySelector(`[data-tour="${currentTour}"]`).classList.remove('active');
                
                currentTour++;
                
                document.getElementById(`tour${currentTour}`).classList.add('active');
                document.querySelector(`[data-tour="${currentTour}"]`).classList.add('active');
                
                // Animasi
                gsap.from(`#tour${currentTour}`, {
                    x: 100,
                    opacity: 0,
                    duration: 0.4
                });
            } else {
                // Selesai tour
                endTour();
            }
        }

        function prevTour() {
            if (currentTour > 1) {
                document.getElementById(`tour${currentTour}`).classList.remove('active');
                document.querySelector(`[data-tour="${currentTour}"]`).classList.remove('active');
                
                currentTour--;
                
                document.getElementById(`tour${currentTour}`).classList.add('active');
                document.querySelector(`[data-tour="${currentTour}"]`).classList.add('active');
                
                gsap.from(`#tour${currentTour}`, {
                    x: -100,
                    opacity: 0,
                    duration: 0.4
                });
            }
        }

        function endTour() {
            gsap.to('#tourOverlay', {
                opacity: 0,
                duration: 0.5,
                onComplete: () => {
                    document.getElementById('tourOverlay').style.display = 'none';
                    localStorage.setItem('xy_tour_completed', 'true');
                    showNotif('Selamat berbelanja! ðŸŽ‰', 'success');
                }
            });
        }

        // ==================== NOTIFICATION ====================
        function showNotif(message, type = 'info') {
            const notif = document.getElementById('notification');
            document.getElementById('notifMessage').textContent = message;
            
            // Play sound
            playNotificationSound();
            
            // Vibrate
            if (navigator.vibrate) navigator.vibrate(200);
            
            notif.classList.add('show');
            
            // Animasi masuk
            gsap.fromTo(notif, 
                { y: -100, opacity: 0 },
                { y: 0, opacity: 1, duration: 0.5, ease: 'back.out' }
            );
            
            setTimeout(() => {
                notif.classList.remove('show');
            }, 3000);
        }

        function hideNotif() {
            document.getElementById('notification').classList.remove('show');
        }

        // ==================== PANEL SWITCHING ====================
        function switchPanel(panelId) {
            if (panelId === currentPanel) return;
            
            // Hide all panels
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            document.getElementById(`panel${panelId.charAt(0).toUpperCase() + panelId.slice(1)}`).classList.add('active');
            
            // Update nav
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-panel="${panelId}"]`).classList.add('active');
            
            // Animasi
            gsap.from('.panel.active', {
                x: 30,
                opacity: 0,
                duration: 0.3
            });
            
            currentPanel = panelId;
        }

        // ==================== SKELETON LOADING ====================
        function loadHomeData() {
            setTimeout(() => {
                document.getElementById('homeSkeleton').style.display = 'none';
                document.getElementById('homeContent').style.display = 'block';
                
                gsap.from('#homeContent > *', {
                    y: 30,
                    opacity: 0,
                    duration: 0.5,
                    stagger: 0.1
                });
            }, 2000);
        }

        // ==================== ADD TO CART ====================
        function addToCart() {
            const cartBadge = document.querySelector('[data-panel="cart"] span:last-child');
            let count = parseInt(cartBadge.textContent || '0');
            count++;
            cartBadge.textContent = count;
            showNotif('Produk ditambahkan ke keranjang!', 'success');
        }

        // ==================== INIT ====================
        window.onload = () => {
            // Cek permission
            if ('Notification' in window && Notification.permission === 'default') {
                document.getElementById('permissionModal').style.display = 'flex';
            } else {
                startTour();
            }
            
            loadHomeData();
            
            // GSAP ScrollTrigger
            gsap.registerPlugin(ScrollTrigger);
        };
    </script>
</body>
</html>
