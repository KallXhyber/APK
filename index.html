<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>XYStore - Mobile</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome 6 (Icons) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <!-- Anime.js untuk animasi -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
    <style>
        /* Custom styles untuk mobile app feel */
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background: #f5f5f7;
            overscroll-behavior: none;
            height: 100vh;
            overflow: hidden;
        }
        
        #app {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        /* Tour overlay */
        .tour-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .tour-card {
            background: white;
            border-radius: 24px;
            padding: 24px;
            max-width: 280px;
            color: #1a1a1a;
            animation: float 2s infinite;
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        /* Bottom nav animation */
        .nav-item {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: #3b82f6;
            transform: translateY(-2px);
        }
        
        /* Content panels */
        .panel {
            display: none;
            height: 100%;
            overflow-y: auto;
            padding: 16px;
            animation: fadeIn 0.3s;
        }
        
        .panel.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        /* Notifikasi */
        .notification {
            position: fixed;
            top: 16px;
            left: 16px;
            right: 16px;
            background: #1e293b;
            color: white;
            padding: 16px;
            border-radius: 12px;
            z-index: 999;
            transform: translateY(-120%);
            transition: transform 0.3s;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .notification.show {
            transform: translateY(0);
        }
        
        /* Product card skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 12px;
            height: 200px;
            margin-bottom: 16px;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Product card */
        .product-card {
            background: white;
            border-radius: 16px;
            padding: 12px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        
        .product-card:active {
            transform: scale(0.98);
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Notification Component -->
        <div id="notification" class="notification flex items-center gap-3">
            <i class="fas fa-bell text-yellow-400"></i>
            <span id="notifMessage">Notifikasi baru!</span>
            <button onclick="hideNotif()" class="ml-auto text-white/60"><i class="fas fa-times"></i></button>
        </div>
        
        <!-- Tour Guide (First Time) -->
        <div id="tourOverlay" class="tour-overlay">
            <div class="tour-card relative">
                <i class="fas fa-store text-5xl text-blue-500 mb-4"></i>
                <h2 class="text-xl font-bold mb-2">Selamat Datang di XYStore!</h2>
                <p class="text-gray-600 mb-4">Belanja makin mudah dengan fitur lengkap. Swipe untuk mulai!</p>
                <button onclick="endTour()" class="bg-blue-500 text-white px-6 py-3 rounded-full font-semibold w-full">
                    Mulai Belanja <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
        
        <!-- Main Content Panels -->
        <div class="flex-1 overflow-hidden relative bg-gray-50">
            <!-- Home Panel -->
            <div id="panelHome" class="panel active">
                <!-- Skeleton loading -->
                <div id="homeSkeleton">
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                </div>
                
                <!-- Real content -->
                <div id="homeContent" style="display: none;">
                    <div class="flex justify-between items-center mb-4">
                        <h1 class="text-2xl font-bold text-gray-800">Halo, Haekal! ðŸ‘‹</h1>
                        <div class="relative" onclick="showNotif('Notifikasi siap!', 'info')">
                            <i class="fas fa-bell text-2xl text-gray-600"></i>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">3</span>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-2xl">
                            <i class="fas fa-tag text-3xl mb-2 opacity-80"></i>
                            <p class="text-sm opacity-90">Diskon Hari Ini</p>
                            <p class="text-xl font-bold">20% OFF</p>
                        </div>
                        <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-4 rounded-2xl">
                            <i class="fas fa-truck text-3xl mb-2 opacity-80"></i>
                            <p class="text-sm opacity-90">Gratis Ongkir</p>
                            <p class="text-xl font-bold">Min. Beli 50K</p>
                        </div>
                    </div>
                    
                    <h2 class="font-semibold text-gray-700 mb-2">Produk Terbaru</h2>
                    <div class="product-card">
                        <div class="flex gap-3">
                            <div class="w-20 h-20 bg-gray-200 rounded-xl"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold">XY Jersey Limited</h3>
                                <p class="text-sm text-gray-500">Sport â€¢ Terjual 1rb+</p>
                                <p class="text-blue-600 font-bold mt-1">Rp 289.000</p>
                            </div>
                        </div>
                    </div>
                    <div class="product-card">
                        <div class="flex gap-3">
                            <div class="w-20 h-20 bg-gray-200 rounded-xl"></div>
                            <div class="flex-1">
                                <h3 class="font-semibold">XY Hoodie Premium</h3>
                                <p class="text-sm text-gray-500">Fashion â€¢ Terjual 500+</p>
                                <p class="text-blue-600 font-bold mt-1">Rp 459.000</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Search Panel -->
            <div id="panelSearch" class="panel">
                <div class="sticky top-0 bg-gray-50 pt-2 pb-4">
                    <div class="bg-white rounded-full px-4 py-3 flex items-center shadow-sm">
                        <i class="fas fa-search text-gray-400 mr-3"></i>
                        <input type="text" placeholder="Cari produk XY..." class="flex-1 outline-none text-sm">
                    </div>
                </div>
                <p class="text-gray-500 text-center mt-8">Rekomendasi pencarian akan muncul di sini</p>
            </div>
            
            <!-- Cart Panel -->
            <div id="panelCart" class="panel">
                <h2 class="text-xl font-bold mb-4">Keranjang</h2>
                <div class="bg-white rounded-2xl p-6 text-center">
                    <i class="fas fa-shopping-cart text-5xl text-gray-300 mb-3"></i>
                    <p class="text-gray-500">Keranjang masih kosong</p>
                    <button onclick="switchPanel('home')" class="bg-blue-500 text-white px-6 py-2 rounded-full mt-3 text-sm">
                        Belanja Sekarang
                    </button>
                </div>
            </div>
            
            <!-- Profile Panel -->
            <div id="panelProfile" class="panel">
                <div class="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-2xl mb-4">
                    <div class="flex items-center gap-3">
                        <div class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center">
                            <i class="fas fa-user text-3xl"></i>
                        </div>
                        <div>
                            <p class="text-lg font-semibold">Haekal</p>
                            <p class="text-sm opacity-90">@haekal_xy</p>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-2">
                    <div class="bg-white p-4 rounded-xl flex items-center gap-3">
                        <i class="fas fa-history text-blue-500 w-6"></i>
                        <span>Riwayat Pesanan</span>
                        <i class="fas fa-chevron-right ml-auto text-gray-400"></i>
                    </div>
                    <div class="bg-white p-4 rounded-xl flex items-center gap-3">
                        <i class="fas fa-heart text-red-500 w-6"></i>
                        <span>Favorit</span>
                        <i class="fas fa-chevron-right ml-auto text-gray-400"></i>
                    </div>
                    <div class="bg-white p-4 rounded-xl flex items-center gap-3">
                        <i class="fas fa-cog text-gray-600 w-6"></i>
                        <span>Pengaturan</span>
                        <i class="fas fa-chevron-right ml-auto text-gray-400"></i>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
        <div class="bg-white border-t border-gray-200 px-4 py-2 flex justify-around items-center safe-bottom">
            <div class="nav-item active text-blue-500 flex flex-col items-center" data-panel="home" onclick="switchPanel('home')">
                <i class="fas fa-home text-xl"></i>
                <span class="text-xs mt-1">Home</span>
            </div>
            <div class="nav-item text-gray-500 flex flex-col items-center" data-panel="search" onclick="switchPanel('search')">
                <i class="fas fa-search text-xl"></i>
                <span class="text-xs mt-1">Cari</span>
            </div>
            <div class="nav-item text-gray-500 flex flex-col items-center relative" data-panel="cart" onclick="switchPanel('cart')">
                <i class="fas fa-shopping-cart text-xl"></i>
                <span class="text-xs mt-1">Cart</span>
                <span class="absolute -top-1 right-0 bg-blue-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center">0</span>
            </div>
            <div class="nav-item text-gray-500 flex flex-col items-center" data-panel="profile" onclick="switchPanel('profile')">
                <i class="fas fa-user text-xl"></i>
                <span class="text-xs mt-1">Akun</span>
            </div>
        </div>
    </div>

    <script>
        // ==================== CONFIG & STATE ====================
        const STORAGE_KEY = 'xy_tour_completed';
        let currentPanel = 'home';
        
        // ==================== NOTIFICATION SYSTEM ====================
        function showNotif(message, type = 'info') {
            const notif = document.getElementById('notification');
            const notifMsg = document.getElementById('notifMessage');
            
            // Play sound
            const audio = new Audio('data:audio/wav;base64,UklGRlwAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YVAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==');
            audio.play().catch(e => console.log('Audio play failed:', e));
            
            // Set icon based on type
            const icon = notif.querySelector('i:first-child');
            if(type === 'success') icon.className = 'fas fa-check-circle text-green-400';
            else if(type === 'error') icon.className = 'fas fa-exclamation-circle text-red-400';
            else icon.className = 'fas fa-bell text-yellow-400';
            
            notifMsg.textContent = message;
            notif.classList.add('show');
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                notif.classList.remove('show');
            }, 3000);
            
            // Vibrate if supported (mobile)
            if(navigator.vibrate) navigator.vibrate(200);
        }
        
        function hideNotif() {
            document.getElementById('notification').classList.remove('show');
        }
        
        // ==================== TOUR SYSTEM ====================
        function checkFirstTime() {
            const tourCompleted = localStorage.getItem(STORAGE_KEY);
            const tourOverlay = document.getElementById('tourOverlay');
            
            if(!tourCompleted) {
                // Show tour with animation
                setTimeout(() => {
                    tourOverlay.style.display = 'flex';
                    anime({
                        targets: '.tour-card',
                        scale: [0.8, 1],
                        opacity: [0, 1],
                        duration: 600,
                        easing: 'easeOutElastic'
                    });
                }, 500);
            }
        }
        
        function endTour() {
            const tourOverlay = document.getElementById('tourOverlay');
            
            anime({
                targets: '.tour-card',
                scale: 0.8,
                opacity: 0,
                duration: 300,
                complete: () => {
                    tourOverlay.style.display = 'none';
                    localStorage.setItem(STORAGE_KEY, 'true');
                    showNotif('Selamat datang di XYStore!', 'success');
                }
            });
        }
        
        // ==================== PANEL SWITCHING ====================
        function switchPanel(panelId) {
            if(panelId === currentPanel) return;
            
            // Update panels
            document.querySelectorAll('.panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.getElementById(`panel${panelId.charAt(0).toUpperCase() + panelId.slice(1)}`).classList.add('active');
            
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active', 'text-blue-500');
                item.classList.add('text-gray-500');
            });
            
            const activeNav = document.querySelector(`[data-panel="${panelId}"]`);
            activeNav.classList.add('active', 'text-blue-500');
            activeNav.classList.remove('text-gray-500');
            
            // Animate transition
            anime({
                targets: '.panel.active',
                translateX: [20, 0],
                opacity: [0.5, 1],
                duration: 300,
                easing: 'easeOutQuad'
            });
            
            currentPanel = panelId;
        }
        
        // ==================== SKELETON LOADING ====================
        function loadHomeData() {
            // Show skeleton first
            document.getElementById('homeSkeleton').style.display = 'block';
            document.getElementById('homeContent').style.display = 'none';
            
            // Simulate API call
            setTimeout(() => {
                document.getElementById('homeSkeleton').style.display = 'none';
                document.getElementById('homeContent').style.display = 'block';
                
                // Animate content
                anime({
                    targets: '#homeContent > *',
                    translateY: [20, 0],
                    opacity: [0, 1],
                    delay: anime.stagger(100),
                    duration: 400
                });
            }, 2000);
        }
        
        // ==================== INITIALIZE ====================
        window.onload = function() {
            // Check if first time user
            checkFirstTime();
            
            // Load home data with skeleton
            loadHomeData();
            
            // Show welcome notification after 2 seconds
            setTimeout(() => {
                showNotif('Aplikasi siap digunakan!', 'success');
            }, 2500);
            
            // Add safe area for notches
            if(window.navigator.standalone) {
                document.body.style.paddingTop = 'constant(safe-area-inset-top)';
            }
        };
        
        // ==================== ADD TO CART SIMULATION ====================
        function addToCart() {
            const cartBadge = document.querySelector('[data-panel="cart"] span:last-child');
            let count = parseInt(cartBadge.textContent || '0');
            count++;
            cartBadge.textContent = count;
            showNotif('Produk ditambahkan ke keranjang!', 'success');
        }
    </script>
    
    <!-- Copyright footer -->
    <div style="position: fixed; bottom: 70px; left: 0; right: 0; text-align: center; font-size: 10px; color: #999; pointer-events: none; z-index: 5;">
        PoweredBy Kall & XyTeam
    </div>
</body>
</html>
